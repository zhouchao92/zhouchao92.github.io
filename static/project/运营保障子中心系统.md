# 运营保障子中心系统
运营保障子中心系统

## 简介
分布式架构的电信运营保障系统，系统基于采集器程序从华为、中兴、烽火等网管处获取设备异常信息，先经过 Flink 程序对告警数据进行标准化、割接等规则匹配，对其进行打标，再对数据进行预处理加工，符合派单条件的调用综调系统的第三方接口生成工单。

### 0.资源采集
Kettle 程序定时从 ftp 或 sftp 文件服务器获取文件，读取文件内容，写入 Oracle 或 PostgreSQL 数据库。

### 1.告警采集
告警的采集方式主要有以下几种：
- MQ消息推送
- 实时接口推送（UDP、TCP）
- DB数据库轮询（高时延）
- 文件服务器推送（高时延），按照约定的数据格式将告警的设备、时间、地点等信息拼接成逗分文件，定时从文件服务器上获取。

### 2.告警解析
将从网管采集到的告警统一格式，发送到 RocketMQ 交由 Flink 程序，并写入 PostgreSQL 数据库、ES，用于备查告警数据。

### 3.告警标准化
Flink 程序连接 RocketMQ 以流的形式对告警消息进行统一处理，经过过期匹配、无效清除匹配、告警丰富、告警标准化、规则匹配（屏蔽、割接、自动操作、重保、派单、关联）、告警压缩等流程，将告警数据写入 PostgreSQL 数据库。

### 4.1.告警关联(异步)
异步任务对告警进行打标，将符合规则的告警合并生成衍生告警。

### 4.2.告警派单(异步)
异步任务轮询数据库的告警，先对告警进行预处理，筛选出需要派单的告警，再按照派单规则的清除条件进行过滤，满足派单条件的根据派单规则计算出待派单时间，在计划的派单时间将工单派送至综合调度系统。

### 5.告警回单或归档
异步任务轮询告警，将已恢复或符合清除条件的未派单告警进行归档处理。已派单的告警若收到综合调度系统的回单动作，将告警进行归档处理。

## 技术架构
后端：Spring Cloud Alibaba、Spring Boot、PostgreSQL、Oracle、Redis、MyBatisPlus、Kafka、RocketMQ、XXL-JOB、Zeebe

前端：Vue、Ant Design

## 功能模块
1. 资源采集（Java + Kettle）：sftp的形式从网管侧同步文件到服务器，再经过 Kettle 程序将数据插入数据库
2. 告警标准化（Flink + RocketMQ）
3. 运营保障 SaaS：运营管理系统，告警查询、工单查询，配置规则策略
4. 定时任务（XXL-JOB）：系统的定时任务调度
5. 告警数据转发：将告警数据转发上报到集团或客户的 Kafka、RocketMQ 资源
