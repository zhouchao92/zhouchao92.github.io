# 告警子中心系统 
运营保障中心-告警子中心

## 项目简介
分布式架构的电信运营保障中心的告警子中心系统，系统基于采集器程序接收网管从华为、中兴、烽火等设备采集到设备异常信息，并将告警先统一格式输出至 RocketMQ 的主题中，先经过 Flink 程序对告警数据进行标准化、割接等规则匹配，对其进行打标，再对数据进行预处理加工，符合派单条件的调用综调系统的第三方接口生成工单。

### 0.资源采集（异步）
Kettle 程序或 Java 程序定时从 ftp 或 sftp 文件服务器获取文件，读取文件内容，写入 Oracle 或 PostgreSQL 数据库，或是从资源推送的数据从数据库直接匹配再更新到网元库中。

### 1.告警采集
告警的采集方式主要有以下几种：
- MQ消息推送
- 实时接口推送（UDP、TCP、SNMP）
- DB数据库轮询（较高时延）
- 文件服务器推送（高时延），按照约定的数据格式将告警的设备、时间、地点等信息拼接成逗分文件，定时从文件服务器上获取。

### 2.告警解析
将从网管采集到的告警统一格式，发送到 RocketMQ 交由 Flink 程序，并写入 PostgreSQL 数据库、ES，用于备查告警数据。

### 3.告警标准化
Flink 程序连接 RocketMQ 以流的形式对告警消息进行统一处理，经过过期匹配、无效清除匹配、告警丰富、告警标准化、规则匹配（屏蔽、割接、自动操作、重保、派单、关联）、告警压缩等流程，将告警数据持久化到 PostgreSQL 数据库。

### 4.1.告警关联(异步)
异步任务对告警进行打标，将符合规则的告警合并或是生成衍生告警。

### 4.2.告警派单(异步)
异步任务轮询数据库的告警，先对告警进行预处理，筛选出需要派单的告警，再按照派单规则的清除条件进行过滤，满足派单条件的根据派单规则计算出待派单时间，在计划的派单时间将工单派送至综合调度系统。

### 5.告警回单或归档
异步任务轮询告警，将已恢复或符合清除条件的未派单告警进行归档处理。已派单的告警若收到综合调度系统的回单动作，将告警进行归档处理。

## 技术架构
后端：Spring Cloud Alibaba、Spring Boot、PostgreSQL、Oracle、Redis、MyBatisPlus、Kafka、RocketMQ、XXL-JOB、Zeebe

前端：Vue、Ant Design

## 核心功能模块
1. 资源采集（Java + Kettle）：sftp的形式从网管侧同步文件到服务器，再经过 Kettle 程序将数据插入数据库
2. 网管告警采集解析程序、告警标准化（Flink + RocketMQ）、规则引擎
3. 运营保障 SaaS：面向客户的运营管理系统，告警查询、工单查询，配置规则策略
4. 定时任务（XXL-JOB）：系统的定时任务调度
5. 告警数据转发：将告警数据转发上报到集团或客户的 Kafka、RocketMQ 资源

## 行业发展
关于运营保障中心的演变可以参考浩鲸科技的文章 [（新一代运营保障体系探索 - 鲸品堂）](https://xie.infoq.cn/article/e15c06107ff46ac7a16532035)。

## 项目特性
告警子中心作为运营保障中心的其中一个模块，被要求能高效、及时、准确、稳定地接收告警、派发工单，是其下游群障系统、调度系统关于工单派发的主要源头，运营商发现故障、处理故障依赖于调度中心的工单即告警。在告警处理的全流程环节中，需要及时地接收到告警并解析为统一格式，重点是要关注处理效率的，这也是系统及时性的瓶颈所在。

## 未来展望
在电信行业，集团的考核标准一直是以 AI 学习等高度自动化来减少人工工作量目标，从 L0 到 L5，其人为参与程度是逐步递减，这就要求告警子中心系统需要具备 AI 分析的能力。告警子中心系统主要可以从告警关联、故障定位等方面发展其 AI 能力，更准确地说是以大数据分析的方式找到告警的关联关系，准确定位其根因，其中也需要运用到知识图谱来构建网元设备间的关联关系以及根告警与子告警间的关联关系，并且需要各个专业的专家和设备厂家提供告警间的关联关系作为语料完善图谱的建设。另一个方向是基于产品设计文档、开发文档、操作手册等系统核心文档，借助大模型生成智能客服机器人，帮助客户操作系统、定位功能点菜单、配置各类系统规则等，降低系统人工维护和运营的成本。
