# 数据库去O化
为了信创环境的建设，国内大部分软件系统都逐步要求数据库去O化，即 Oracle 数据库需要迁移至 MySQL、Postgresql 数据库。

## 表结构迁移
借助 AI 对话，将导出的 Oracle 表结构转换为其他数据库的表结构，需要额外注意序列、主键、索引等信息。

## sql语法
针对业务中的 sql 语句，可能采用了 Oracle 函数而其他数据库不存在的，比如 nvl，这种判空的语法，需要人工核对。

```sql
// Oracle 特有语法
SELECT 1 FROM DUAL;

```

## 数据全量同步
一般可以借助 Kettle 的表输入和表输出组件来实现数据的全量迁移，性能参数可以通过 shell 脚本来指定 jvm 的参数，从而提高迁移效率。

## 存储过程迁移
一般存储过程会通过Oracle的定时任务来触发，改造时通过Java程序来实现。结合存储过程执行的耗时与内存占比情况，采用了两种任务调度的方式来实施。
- 对于耗时严重或者内存占用高的任务，采用Spring Boot 的定时调度任务实现，部署在虚拟主机，可采用条件注解和动态的cron表达式配置任务。
- 耗时不高或者内存占用低的任务，采用XXL-JOB的方式实现，最大限度地将服务部署上云。

## 开源工具
Alibaba 的开源工具 ![datax](https://github.com/alibaba/DataX)，采用 json 配置数据库类型、性能参数与业务 sql 的形式，可以在短时间内进行业务切换，以及完成数据的迁移。

